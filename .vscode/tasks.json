{
    // See https://go.microsoft.com/fwlink/?LinkId=733558
    // for the documentation about the tasks.json format
    "version": "2.0.0",
    "inputs": [
        {
            "id": "release-note",
            "type": "promptString",
            "description": "Firebase - Release Note",
            "default": "new release"
        },
        {
            "id": "release-group",
            "type": "promptString",
            "description": "Firebase - Release Group",
            "default": "dev"
        },
    ],
    "tasks": [
        {
            "label": "Sats Android: Build for Production",
            "type": "shell",
            "command": "flutter clean && flutter build appbundle --release --verbose",
            "options": {
                "cwd": "${workspaceRoot}/user-app"
            }
        },
        {
            "label": "Sats Android: Build & Ditribute",
            "type": "shell",
            "command": "flutter clean && flutter build apk --release && cd build/app/outputs/apk/release && firebase appdistribution:distribute app-release.apk --app 1:990536701874:android:85ee150222f91ccff276ab --release-notes  \"${input:release-note}\"  --groups \"${input:release-group}\"  --groups \"${input:release-group}\"",
            "options": {
                "cwd": "${workspaceRoot}/user-app"
            }
        },
        {
            "label": "Sats iOS: Build & Ditribute",
            "type": "shell",
            "command": "flutter clean && flutter build ios && rm -rf build/export && mkdir -p build/export  && cd ios &&  xcodebuild -workspace Runner.xcworkspace -scheme Runner -sdk iphoneos -configuration Release archive -archivePath $PWD/build/Runner.xcarchive && xcodebuild -exportArchive -archivePath $PWD/build/Runner.xcarchive -exportOptionsPlist ExportOptions.plist -exportPath $PWD/build/Runner.ipa -allowProvisioningUpdates &&  cd .. && cp ios/build/Runner.ipa/Runner.ipa build/export && cd build/export && firebase appdistribution:distribute Runner.ipa --app 1:990536701874:ios:9aace2cbac1e3424f276ab --release-notes  \"${input:release-note}\"  --groups \"${input:release-group}\"",
            "options": {
                "cwd": "${workspaceRoot}/user-app"
            }
        },
        {
            "label": "Sats Android: Ditribute",
            "type": "shell",
            "command": "cd build/app/outputs/apk/release && firebase appdistribution:distribute app-release.apk --app 1:990536701874:android:85ee150222f91ccff276ab --release-notes  \"${input:release-note}\"  --groups \"dev\"",
            "options": {
                "cwd": "${workspaceRoot}/user-app"
            }
        },
        {
            "label": "Enable Freezed",
            "type": "shell",
            "command": "flutter pub run build_runner watch --delete-conflicting-outputs"
        }
        //ios
        //&& cd ../../../../../ && flutter clean && flutter build ios && rm -rf build/export && mkdir -p build/export  && cd ios &&  xcodebuild -workspace Runner.xcworkspace -scheme Runner -sdk iphoneos -configuration Release archive -archivePath $PWD/build/Runner.xcarchive && xcodebuild -exportArchive -archivePath $PWD/build/Runner.xcarchive -exportOptionsPlist ExportOptions.plist -exportPath $PWD/build/Runner.ipa -allowProvisioningUpdates &&  cd .. && cp ios/build/Runner.ipa/Runner.ipa build/export && cd build/export && firebase appdistribution:distribute Runner.ipa --app 1:990536701874:ios:9aace2cbac1e3424f276ab --release-notes  \"${input:release-note}\
        //&& cd ../../../../../ && flutter clean && flutter build ios && rm -rf build/export && mkdir -p build/export  && cd ios &&  xcodebuild -workspace Runner.xcworkspace -scheme Runner -sdk iphoneos -configuration Release archive -archivePath $PWD/build/Runner.xcarchive && xcodebuild -exportArchive -archivePath $PWD/build/Runner.xcarchive -exportOptionsPlist ExportOptions.plist -exportPath $PWD/build/Runner.ipa -allowProvisioningUpdates &&  cd .. && cp ios/build/Runner.ipa/Runner.ipa build/export && cd build/export && firebase appdistribution:distribute Runner.ipa --app 1:990536701874:ios:9aace2cbac1e3424f276ab --release-notes  \"${input:release-note}\"  --groups \"sats\"
        // {
        //     "label": "Sats(Debug Build): Ditribute",
        //     "type": "shell",
        //     "command": "cd build/app/outputs/flutter-apk && firebase appdistribution:distribute app-debug.apk --app 1:990536701874:android:85ee150222f91ccff276ab --release-notes  \"${input:release-note}\"  --groups \"sats\" ",
        //     "options": {
        //         "cwd": "${workspaceRoot}/user-app"
        //     }
        // },
        // \"New release\"
        // {
        //     "label": "Flutter: Clean",
        //     "type": "shell",
        //     "command": "flutter clean",
        //     "options": {
        //         "cwd": "${workspaceRoot}/frontend"
        //     }
        // },
        // {
        //     "label": "Flutter Web: Build",
        //     "type": "shell",
        //     "command": "flutter build web --release",
        //     "dependsOn": [
        //         "Flutter: Clean"
        //     ],
        //     "options": {
        //         "cwd": "${workspaceRoot}/frontend"
        //     }
        // },
        // {
        //     "label": "Flutter Web: Build & Deploy Fresh",
        //     "type": "shell",
        //     "command": "flutter clean && flutter build web --release && ssh mj@gcptest3 rm -rf /home/mj/web/ && ssh mj@gcptest3 mkdir -p /home/mj/web/ && scp -r ~/desktop/code/sats/frontend/build/web mj@gcptest3:/home/mj/",
        //     "options": {
        //         "cwd": "${workspaceRoot}/frontend"
        //     }
        // },
        // {
        //     "label": "Flutter Web: Build & Deploy Update",
        //     "type": "shell",
        //     "command": "flutter clean && flutter build web --release && scp ~/desktop/code/sats/frontend/build/web/main.dart.js mj@gcptest3:/home/mj/web/ && scp ~/desktop/code/sats/frontend/build/web/index.html mj@gcptest3:/home/mj/web/",
        //     "options": {
        //         "cwd": "${workspaceRoot}/frontend"
        //     },
        // },
        // {
        //     "label": "Flutter Web: Deploy Update - Without Build",
        //     "type": "shell",
        //     "command": "scp ~/desktop/code/sats/frontend/build/web/main.dart.js mj@gcptest3:/home/mj/web/ && scp ~/desktop/code/sats/frontend/build/web/index.html mj@gcptest3:/home/mj/web/",
        //     "options": {
        //         "cwd": "${workspaceRoot}/frontend"
        //     },
        // },
    ]
}